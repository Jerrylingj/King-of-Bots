(function(t){function e(e){for(var a,o,l=e[0],r=e[1],i=e[2],b=0,u=[];b<l.length;b++)o=l[b],Object.prototype.hasOwnProperty.call(c,o)&&c[o]&&u.push(c[o][0]),c[o]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);d&&d(e);while(u.length)u.shift()();return n.push.apply(n,i||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],a=!0,l=1;l<s.length;l++){var r=s[l];0!==c[r]&&(a=!1)}a&&(n.splice(e--,1),t=o(o.s=s[0]))}return t}var a={},c={app:0},n=[];function o(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=a,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(s,a,function(e){return t[e]}.bind(null,a));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=e,l=l.slice();for(var i=0;i<l.length;i++)e(l[i]);var d=r;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"084a":function(t,e,s){"use strict";s("e6ba")},"0d1d":function(t,e,s){"use strict";s("806a")},"0f93":function(t,e,s){"use strict";s("ad17")},"38e6":function(t,e,s){"use strict";s("6d59")},"39ee":function(t,e,s){"use strict";s("77da")},"3ae0":function(t,e,s){"use strict";s("c527")},"41de":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);var a=s("7a23");function c(t,e,s,c,n,o){const l=Object(a["F"])("NavBar"),r=Object(a["F"])("router-view");return Object(a["x"])(),Object(a["g"])(a["a"],null,[Object(a["k"])(l),Object(a["k"])(r)],64)}const n=t=>(Object(a["A"])("data-v-4edf868d"),t=t(),Object(a["y"])(),t),o={class:"navbar navbar-expand-lg bg-body-tertiary",style:{"box-shadow":"0 4px 8px 0 rgba(0, 0, 0, 0.2)"}},l=n(()=>Object(a["h"])("div",{class:"navbar-icon"},null,-1)),r={class:"container"},i={class:"collapse navbar-collapse",id:"navbarText"},d={class:"navbar-nav me-auto mb-2 mb-lg-0"},b={key:0,class:"nav-item"},u=n(()=>Object(a["h"])("img",{src:"https://img.icons8.com/?size=100&id=59335&format=png&color=000000",class:"icons"},null,-1)),p={key:1,class:"nav-item"},h=n(()=>Object(a["h"])("img",{src:"https://img.icons8.com/?size=100&id=5T76ABfXaynZ&format=png&color=000000",class:"icons"},null,-1)),m={key:2,class:"nav-item"},j=n(()=>Object(a["h"])("img",{src:"https://img.icons8.com/?size=100&id=0IIlCLa2f618&format=png&color=000000",class:"icons"},null,-1)),O={class:"nav-item"},g=n(()=>Object(a["h"])("img",{src:"https://img.icons8.com/?size=100&id=CsbD6WKBWxtf&format=png&color=000000",class:"icons"},null,-1)),f={class:"nav-item"},v=n(()=>Object(a["h"])("img",{src:"https://img.icons8.com/?size=100&id=14086&format=png&color=000000",class:"icons"},null,-1)),_={key:0,class:"navbar-nav"},y={class:"nav-item dropdown"},x={class:"nav-link dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},k=n(()=>Object(a["h"])("img",{src:"https://img.icons8.com/?size=100&id=2oRq7VXjDba7&format=png&color=000000",class:"icons"},null,-1)),w={class:"dropdown-menu"},I=n(()=>Object(a["h"])("img",{src:"https://img.icons8.com/?size=100&id=NpWB6GLVTcND&format=png&color=000000",class:"icons"},null,-1)),C=n(()=>Object(a["h"])("img",{src:"https://img.icons8.com/?size=100&id=Q1xkcFuVON39&format=png&color=000000",class:"icons"},null,-1)),A={key:1,class:"navbar-nav"},S={class:"nav-item"},B=n(()=>Object(a["h"])("img",{src:"https://img.icons8.com/?size=100&id=DXc6Ki803SDo&format=png&color=000000",class:"icons"},null,-1)),L={class:"nav-item"},z=n(()=>Object(a["h"])("img",{src:"https://img.icons8.com/?size=100&id=T594YO5M5wL5&format=png&color=000000",class:"icons"},null,-1));function M(t,e,s,c,n,M){const F=Object(a["F"])("router-link");return Object(a["x"])(),Object(a["g"])("nav",o,[l,Object(a["h"])("div",r,[Object(a["k"])(F,{class:"navbar-brand title",to:{name:"home"}},{default:Object(a["N"])(()=>[Object(a["j"])("King of Bots")]),_:1}),Object(a["h"])("div",i,[Object(a["h"])("ul",d,[t.$store.state.user.is_login?(Object(a["x"])(),Object(a["g"])("li",b,[Object(a["k"])(F,{class:Object(a["s"])("pk_index"==c.route_name?"nav-link active":"nav-link"),to:{name:"pk_index"}},{default:Object(a["N"])(()=>[u,Object(a["j"])(" 对战 ")]),_:1},8,["class"])])):Object(a["f"])("",!0),t.$store.state.user.is_login?(Object(a["x"])(),Object(a["g"])("li",p,[Object(a["k"])(F,{class:Object(a["s"])("record_index"==c.route_name?"nav-link active":"nav-link"),to:{name:"record_index"}},{default:Object(a["N"])(()=>[h,Object(a["j"])(" 对局列表 ")]),_:1},8,["class"])])):Object(a["f"])("",!0),t.$store.state.user.is_login?(Object(a["x"])(),Object(a["g"])("li",m,[Object(a["k"])(F,{class:Object(a["s"])("ranklist_index"==c.route_name?"nav-link active":"nav-link"),to:{name:"ranklist_index"}},{default:Object(a["N"])(()=>[j,Object(a["j"])(" 排行榜 ")]),_:1},8,["class"])])):Object(a["f"])("",!0),Object(a["h"])("li",O,[Object(a["k"])(F,{class:Object(a["s"])("rule_index"==c.route_name?"nav-link active":"nav-link"),to:{name:"rule_index"}},{default:Object(a["N"])(()=>[g,Object(a["j"])(" 游戏规则 ")]),_:1},8,["class"])]),Object(a["h"])("li",f,[Object(a["k"])(F,{class:Object(a["s"])("example_index"==c.route_name?"nav-link active":"nav-link"),to:{name:"example_index"}},{default:Object(a["N"])(()=>[v,Object(a["j"])(" 样例代码 ")]),_:1},8,["class"])])]),t.$store.state.user.is_login?(Object(a["x"])(),Object(a["g"])("ul",_,[Object(a["h"])("li",y,[Object(a["h"])("a",x,[k,Object(a["j"])(" "+Object(a["I"])(t.$store.state.user.username),1)]),Object(a["h"])("ul",w,[Object(a["h"])("li",null,[Object(a["k"])(F,{class:"dropdown-item",to:{name:"user_bot_index"}},{default:Object(a["N"])(()=>[I,Object(a["j"])(" 我的Bot ")]),_:1})]),Object(a["h"])("li",null,[Object(a["h"])("a",{class:"dropdown-item",href:"#",onClick:e[0]||(e[0]=(...t)=>c.logout&&c.logout(...t))},[C,Object(a["j"])(" 退出 ")])])])])])):(Object(a["x"])(),Object(a["g"])("ul",A,[Object(a["h"])("li",S,[Object(a["k"])(F,{class:"nav-link",to:{name:"user_account_login"},role:"button"},{default:Object(a["N"])(()=>[B,Object(a["j"])(" 登录 ")]),_:1})]),Object(a["h"])("li",L,[Object(a["k"])(F,{class:"nav-link",to:{name:"user_account_register"},role:"button"},{default:Object(a["N"])(()=>[z,Object(a["j"])(" 注册 ")]),_:1})])]))])])])}var F=s("6605"),P=s("5502"),$={setup(){const t=Object(P["b"])(),e=Object(F["c"])();let s=Object(a["c"])(()=>e.name);const c=()=>{t.dispatch("logout")};return{route_name:s,logout:c}},mounted(){const t=document.createElement("script");t.src="https://api.vvhan.com/api/script/yinghua",t.async=!0,document.body.appendChild(t)}},N=(s("39ee"),s("6b0d")),G=s.n(N);const U=G()($,[["render",M],["__scopeId","data-v-4edf868d"]]);var D=U,V=(s("ab8b"),s("4989")),E={components:{NavBar:D}};s("f15a");const R=G()(E,[["render",c]]);var T=R;const q=t=>(Object(a["A"])("data-v-af800030"),t=t(),Object(a["y"])(),t),J={key:3,class:"user-color"},K=q(()=>Object(a["h"])("div",{class:"text"},"当前颜色：",-1)),H={key:0,class:"color-red"},W={key:1,class:"color-blue"};function X(t,e,s,c,n,o){const l=Object(a["F"])("PlayGround"),r=Object(a["F"])("MatchGround"),i=Object(a["F"])("ResultBoard");return Object(a["x"])(),Object(a["g"])(a["a"],null,["playing"===t.$store.state.pk.status?(Object(a["x"])(),Object(a["e"])(l,{key:0})):Object(a["f"])("",!0),"matching"===t.$store.state.pk.status?(Object(a["x"])(),Object(a["e"])(r,{key:1})):Object(a["f"])("",!0),"none"!==t.$store.state.pk.loser?(Object(a["x"])(),Object(a["e"])(i,{key:2})):Object(a["f"])("",!0),"playing"===t.$store.state.pk.status?(Object(a["x"])(),Object(a["g"])("div",J,[K,parseInt(t.$store.state.user.id)===parseInt(t.$store.state.pk.b_id)?(Object(a["x"])(),Object(a["g"])("div",H)):Object(a["f"])("",!0),parseInt(t.$store.state.user.id)===parseInt(t.$store.state.pk.a_id)?(Object(a["x"])(),Object(a["g"])("div",W)):Object(a["f"])("",!0)])):Object(a["f"])("",!0)],64)}const Q=t=>(Object(a["A"])("data-v-620ecca7"),t=t(),Object(a["y"])(),t),Y={class:"playground"},Z=Q(()=>Object(a["h"])("br",null,null,-1)),tt=Q(()=>Object(a["h"])("br",null,null,-1)),et=Q(()=>Object(a["h"])("br",null,null,-1)),st=Q(()=>Object(a["h"])("br",null,null,-1));function at(t,e,s,c,n,o){const l=Object(a["F"])("GameMap");return Object(a["x"])(),Object(a["g"])("div",Y,[Z,tt,et,st,Object(a["k"])(l)])}const ct={ref:"parent",class:"gamemap"},nt={ref:"canvas",tabindex:"0"};function ot(t,e,s,c,n,o){return Object(a["x"])(),Object(a["g"])("div",ct,[Object(a["h"])("canvas",nt,null,512)],512)}s("14d9");const lt=[];class rt{constructor(){lt.push(this),this.timedelta=0,this.has_called_start=!1}start(){}update(){}on_destroy(){}destroy(){this.on_destroy();for(let t in lt){const e=lt[t];if(e==this){lt.splice(t);break}}}}let it;const dt=t=>{for(let e of lt)e.has_called_start?(e.timedelta=t-it,e.update()):(e.has_called_start=!0,e.start());it=t,requestAnimationFrame(dt)};requestAnimationFrame(dt);class bt extends rt{constructor(t,e,s){super(),this.r=t,this.c=e,this.gamemap=s,this.color="#B37226"}update(){this.render()}render(){const t=this.gamemap.L,e=this.gamemap.ctx;e.fillStyle=this.color,e.fillRect(this.c*t,this.r*t,t,t)}}class ut{constructor(t,e){this.r=t,this.c=e,this.x=e+.5,this.y=t+.5}}class pt extends rt{constructor(t,e){super(),this.id=t.id,this.color=t.color,this.gamemap=e,this.cells=[new ut(t.r,t.c)],this.next_cell=null,this.speed=5,this.direction=-1,this.status="idle",this.dr=[-1,0,1,0],this.dc=[0,1,0,-1],this.step=0,this.eps=.1,this.eye_dirction=0,1===this.id&&(this.eye_dirction=2),this.eye_dx=[[-1,1],[1,1],[1,-1],[-1,-1]],this.eye_dy=[[-1,-1],[1,-1],[1,1],[-1,1]]}start(){}set_direction(t){this.direction=t}check_tail_increasing(){return this.step<=10||this.step%3===1}next_step(){const t=this.direction;this.next_cell=new ut(this.cells[0].r+this.dr[t],this.cells[0].c+this.dc[t]),this.direction=-1,this.status="move",this.step++,this.eye_dirction=t;const e=this.cells.length;for(let s=e;s>0;s--)this.cells[s]=JSON.parse(JSON.stringify(this.cells[s-1]));this.gamemap.check_valid(this.next_cell)||(this.status="die")}update_move(){const t=this.next_cell.x-this.cells[0].x,e=this.next_cell.y-this.cells[0].y,s=Math.sqrt(t*t+e*e);if(s<this.eps)this.cells[0]=this.next_cell,this.next_cell=null,this.status="idle",this.check_tail_increasing()||this.cells.pop();else{const a=this.speed*this.timedelta/1e3;if(this.cells[0].x+=a*t/s,this.cells[0].y+=a*e/s,!this.check_tail_increasing()){const t=this.cells.length,e=this.cells[t-1],c=this.cells[t-2],n=c.x-e.x,o=c.y-e.y;e.x+=a*n/s,e.y+=a*o/s}}}update(){"move"===this.status&&this.update_move(),this.render()}render(){const t=this.gamemap.L,e=this.gamemap.ctx;e.fillStyle=this.color,"die"===this.status&&(e.fillStyle="white");for(const s of this.cells)e.beginPath(),e.arc(s.x*t,s.y*t,.4*t,0,2*Math.PI),e.fill();for(let s=1;s<this.cells.length;s++){const a=this.cells[s-1],c=this.cells[s];Math.abs(a.x-c.x)<this.eps&&Math.abs(a.y-c.y)<this.eps||(Math.abs(a.x-c.x)<this.eps?e.fillRect((a.x-.4)*t,Math.min(a.y,c.y)*t,.8*t,Math.abs(a.y-c.y)*t):e.fillRect(Math.min(a.x,c.x)*t,(a.y-.4)*t,Math.abs(a.x-c.x)*t,.8*t))}e.fillStyle="black";for(let s=0;s<2;s++)e.beginPath(),e.arc(this.cells[0].x*t+.2*this.eye_dx[this.eye_dirction][s]*t,this.cells[0].y*t+.2*this.eye_dy[this.eye_dirction][s]*t,.08*t,0,2*Math.PI),e.fill()}}class ht extends rt{constructor(t,e,s){super(),this.ctx=t,this.parent=e,this.store=s,this.L=0,this.rows=13,this.cols=14,this.inner_walls_count=20,this.walls=[],this.snakes=[new pt({id:0,color:"#4876EC",r:this.rows-2,c:1},this),new pt({id:1,color:"#F94848",r:1,c:this.cols-2},this)],this.add_listening_events()}create_walls(){const t=this.store.state.pk.gamemap;for(let e=0;e<this.rows;e++)for(let s=0;s<this.cols;s++)t[e][s]&&this.walls.push(new bt(e,s,this));return!0}add_listening_events(){if(this.store.state.record.is_record){console.log("放录像");let t=0;const e=this.store.state.record.a_steps,s=this.store.state.record.b_steps,a=this.store.state.record.record_loser,[c,n]=this.snakes;console.log("asteps: "+e),console.log("bsteps: "+s);const o=setInterval(()=>{t>=e.length-1?(console.log("死亡"),"all"!==a&&"A"!==a||(c.status="die"),"all"!==a&&"B"!==a||(n.status="die"),clearInterval(o)):(console.log("a_dir: "+parseInt(e[t])),console.log("b_dir: "+parseInt(s[t])),c.set_direction(parseInt(e[t])),n.set_direction(parseInt(s[t]))),t++},500)}else this.ctx.canvas.focus(),this.ctx.canvas.addEventListener("keydown",t=>{let e=-1;"ArrowUp"===t.key?e=0:"ArrowRight"===t.key?e=1:"ArrowDown"===t.key?e=2:"ArrowLeft"===t.key&&(e=3),e>=0&&this.store.state.pk.socket.send(JSON.stringify({event:"move",direction:e}))})}start(){this.create_walls()}update_size(){this.L=Math.min(this.parent.clientWidth/this.cols,this.parent.clientHeight/this.rows),this.ctx.canvas.width=this.L*this.cols,this.ctx.canvas.height=this.L*this.rows}check_ready(){for(const t of this.snakes){if("idle"!==t.status)return!1;if(-1===t.direction)return!1}return!0}next_step(){for(const t of this.snakes)t.next_step()}check_valid(t){for(const e of this.walls)if(e.r===t.r&&e.c===t.c)return!1;for(const e of this.snakes){let s=e.cells.length;e.check_tail_increasing()||s--;for(let a=0;a<s;a++)if(e.cells[a].r===t.r&&e.cells[a].c===t.c)return!1}return!0}update(){this.update_size(),this.check_ready()&&this.next_step(),this.render()}render(){const t="#A2D149",e="#AAD751";for(let s=0;s<this.rows;s++)for(let a=0;a<this.cols;a++)this.ctx.fillStyle=(s+a)%2===0?e:t,this.ctx.fillRect(a*this.L,s*this.L,this.L,this.L);for(const s of this.walls)s.render();for(const s of this.snakes)s.update()}}var mt={setup(){const t=Object(P["b"])();let e=Object(a["C"])(null),s=Object(a["C"])(null);return Object(a["v"])(()=>{t.commit("updateGameObject",new ht(s.value.getContext("2d"),e.value,t))}),{parent:e,canvas:s}}};s("de29");const jt=G()(mt,[["render",ot],["__scopeId","data-v-dde9b45c"]]);var Ot=jt,gt={name:"PlayGround",components:{GameMap:Ot}};s("3ae0");const ft=G()(gt,[["render",at],["__scopeId","data-v-620ecca7"]]);var vt=ft;const _t=t=>(Object(a["A"])("data-v-a9961cce"),t=t(),Object(a["y"])(),t),yt={class:"matchground"},xt={class:"row"},kt={class:"col-4"},wt={class:"user-photo"},It=["src"],Ct={class:"user-username"},At={class:"col-4"},St={class:"user-select-bot"},Bt=_t(()=>Object(a["h"])("option",{selected:"",style:{"font-family":"cursive"},value:"-1"},"亲自出马",-1)),Lt=["value"],zt={class:"col-4"},Mt={class:"user-photo"},Ft=["src"],Pt={class:"user-username"},$t={class:"col-12",style:{"text-align":"center"}};function Nt(t,e,s,c,n,o){return Object(a["x"])(),Object(a["g"])("div",yt,[Object(a["h"])("div",xt,[Object(a["h"])("div",kt,[Object(a["h"])("div",wt,[Object(a["h"])("img",{src:t.$store.state.user.photo},null,8,It)]),Object(a["h"])("div",Ct,Object(a["I"])(t.$store.state.user.username),1)]),Object(a["h"])("div",At,[Object(a["h"])("div",St,[Object(a["O"])(Object(a["h"])("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>c.select_bot=t),class:"form-select","aria-label":"Default select example"},[Bt,(Object(a["x"])(!0),Object(a["g"])(a["a"],null,Object(a["D"])(c.bots,t=>(Object(a["x"])(),Object(a["g"])("option",{key:t.id,value:t.id,style:{"font-family":"cursive"}},Object(a["I"])(t.title),9,Lt))),128))],512),[[a["K"],c.select_bot]])])]),Object(a["h"])("div",zt,[Object(a["h"])("div",Mt,[Object(a["h"])("img",{src:t.$store.state.pk.opponent_photo},null,8,Ft)]),Object(a["h"])("div",Pt,Object(a["I"])(t.$store.state.pk.opponent_username),1)]),Object(a["h"])("div",$t,[Object(a["h"])("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=(...t)=>c.click_match_btn&&c.click_match_btn(...t))},Object(a["I"])(c.match_btn_info),1)])])])}var Gt=s("1157"),Ut=s.n(Gt),Dt={setup(){const t=Object(P["b"])();let e=Object(a["C"])("开始匹配"),s=Object(a["C"])([]),c=Object(a["C"])("-1");const n=()=>{"开始匹配"===e.value?(e.value="取消",console.log(c.value),t.state.pk.socket.send(JSON.stringify({event:"start-matching",bot_id:c.value}))):(e.value="开始匹配",t.state.pk.socket.send(JSON.stringify({event:"stop-matching"})))},o=()=>{Ut.a.ajax({url:"https://app7033.acapp.acwing.com.cn/api/user/bot/getlist/",type:"GET",headers:{Authorization:"Bearer "+t.state.user.token},success(t){s.value=t}})};return o(),{match_btn_info:e,click_match_btn:n,bots:s,select_bot:c}}};s("ce67");const Vt=G()(Dt,[["render",Nt],["__scopeId","data-v-a9961cce"]]);var Et=Vt;const Rt={class:"result-board"},Tt={key:0,class:"result-board-text draw"},qt={key:1,class:"result-board-text defeat"},Jt={key:2,class:"result-board-text victory"},Kt={key:3,class:"result-board-btn"};function Ht(t,e,s,c,n,o){return Object(a["x"])(),Object(a["g"])("div",Rt,["all"===t.$store.state.pk.loser?(Object(a["x"])(),Object(a["g"])("div",Tt," Draw ")):"A"===t.$store.state.pk.loser&&t.$store.state.pk.a_id==t.$store.state.user.id||"B"===t.$store.state.pk.loser&&t.$store.state.pk.b_id==t.$store.state.user.id?(Object(a["x"])(),Object(a["g"])("div",qt," Defeat… ")):(Object(a["x"])(),Object(a["g"])("div",Jt," Victory!! ")),"none"!==t.$store.state.pk.loser?(Object(a["x"])(),Object(a["g"])("div",Kt,[Object(a["h"])("button",{type:"button",class:"btn btn-danger",onClick:e[0]||(e[0]=(...t)=>c.restart&&c.restart(...t))}," 再来一把! ")])):Object(a["f"])("",!0)])}var Wt={setup(){const t=Object(P["b"])(),e=()=>{t.commit("updateStatus","matching"),t.commit("updateLoser","none"),t.commit("updateOpponent",{username:"我的对手",photo:"https://ts1.cn.mm.bing.net/th/id/R-C.c256dbecea080677593c4236b699020a?rik=qK71Iap4gmYNHA&riu=http%3a%2f%2fwww.imanami.com%2fwp-content%2fuploads%2f2016%2f03%2funknown-user.jpg&ehk=K9lZs3cX1UTchIGU%2baD4jf5rQeIyn41WGbDE9Ggxkm4%3d&risl=&pid=ImgRaw&r=0&sres=1&sresct=1"})};return{restart:e}}};s("aaa2");const Xt=G()(Wt,[["render",Ht],["__scopeId","data-v-0e780a3c"]]);var Qt=Xt,Yt={components:{PlayGround:vt,MatchGround:Et,ResultBoard:Qt},setup(){const t=Object(P["b"])(),e=`wss://app7033.acapp.acwing.com.cn/websocket/${t.state.user.token}/`;let s=null;Object(a["v"])(()=>{t.commit("updateOpponent",{username:"我的对手",photo:"https://ts1.cn.mm.bing.net/th/id/R-C.c256dbecea080677593c4236b699020a?rik=qK71Iap4gmYNHA&riu=http%3a%2f%2fwww.imanami.com%2fwp-content%2fuploads%2f2016%2f03%2funknown-user.jpg&ehk=K9lZs3cX1UTchIGU%2baD4jf5rQeIyn41WGbDE9Ggxkm4%3d&risl=&pid=ImgRaw&r=0&sres=1&sresct=1"}),s=new WebSocket(e),s.onopen=()=>{console.log("connected"),t.commit("updateSocket",s)},s.onmessage=e=>{const s=JSON.parse(e.data);if("start-matching"===s.event)t.commit("updateOpponent",{username:s.opponent_username,photo:s.opponent_photo}),setTimeout(()=>{t.commit("updateStatus","playing")},400),t.commit("updateGame",s.game);else if("move"===s.event){console.log(s);const e=t.state.pk.gameObject,[a,c]=e.snakes;a.set_direction(s.a_direction),c.set_direction(s.b_direction)}else if("result"===s.event){console.log(s);const e=t.state.pk.gameObject,[a,c]=e.snakes;"all"!==s.loser&&"A"!==s.loser||(a.status="die"),"all"!==s.loser&&"B"!==s.loser||(c.status="die"),t.commit("updateLoser",s.loser)}},s.onclose=()=>{console.log("disconnected"),t.commit("updateStatus","matching"),t.commit("updateLoser","none"),t.commit("updateIsRecord",!1)}}),Object(a["w"])(()=>{s.close(),t.commit("updateStatus","matching"),t.commit("updateLoser","none"),t.commit("updateIsRecord",!1)})}};s("a5f2");const Zt=G()(Yt,[["render",X],["__scopeId","data-v-af800030"]]);var te=Zt;const ee=t=>(Object(a["A"])("data-v-4cd3f1a3"),t=t(),Object(a["y"])(),t),se={class:"table table-striped table-hover",style:{"margin-top":"2vh"}},ae=ee(()=>Object(a["h"])("thead",null,[Object(a["h"])("tr",{style:{padding:"1vh"}},[Object(a["h"])("th",null,"玩家"),Object(a["h"])("th",null,"rating")])],-1)),ce={style:{"text-align":"center"}},ne=["src"],oe={class:"user-username"},le={style:{"text-align":"center","font-size":"130%"}},re={"aria-label":"..."},ie={class:"pagination",style:{float:"right"}},de=ee(()=>Object(a["h"])("a",{class:"page-link",href:"#"},"上一页",-1)),be=[de],ue=["onClick"],pe={class:"page-link",href:"#"},he=ee(()=>Object(a["h"])("a",{class:"page-link",href:"#"},"下一页",-1)),me=[he];function je(t,e,s,c,n,o){const l=Object(a["F"])("ContentField");return Object(a["x"])(),Object(a["e"])(l,null,{default:Object(a["N"])(()=>[Object(a["h"])("table",se,[ae,Object(a["h"])("tbody",null,[(Object(a["x"])(!0),Object(a["g"])(a["a"],null,Object(a["D"])(c.users,t=>(Object(a["x"])(),Object(a["g"])("tr",{key:t.id},[Object(a["h"])("td",ce,[Object(a["h"])("img",{src:t.photo,class:"user-photo"},null,8,ne),Object(a["h"])("span",oe,Object(a["I"])(t.username),1)]),Object(a["h"])("td",le,Object(a["I"])(t.rating),1)]))),128))])]),Object(a["h"])("nav",re,[Object(a["h"])("ul",ie,[Object(a["h"])("li",{class:"page-item",onClick:e[0]||(e[0]=t=>c.click_page(-2))},be),(Object(a["x"])(!0),Object(a["g"])(a["a"],null,Object(a["D"])(c.pages,t=>(Object(a["x"])(),Object(a["g"])("li",{class:Object(a["s"])("page-item "+t.is_active),"aria-current":"page",key:t.number,onClick:e=>c.click_page(t.number)},[Object(a["h"])("a",pe,Object(a["I"])(t.number),1)],10,ue))),128)),Object(a["h"])("li",{class:"page-item",onClick:e[1]||(e[1]=t=>c.click_page(-1))},me)])])]),_:1})}const Oe={class:"container content-field"},ge={class:"card"},fe={class:"card-body"};function ve(t,e){return Object(a["x"])(),Object(a["g"])("div",Oe,[Object(a["h"])("div",ge,[Object(a["h"])("div",fe,[Object(a["E"])(t.$slots,"default",{},void 0,!0)])])])}s("8329");const _e={},ye=G()(_e,[["render",ve],["__scopeId","data-v-3e555af2"]]);var xe=ye,ke={components:{ContentField:xe},setup(){const t=Object(P["b"])();let e=Object(a["C"])([]),s=1,c=0,n=Object(a["C"])([]);const o=t=>{if(-2===t)t=Math.max(s-1,1);else if(-1===t){let e=parseInt(Math.ceil(c/10));t=Math.min(e,s+1)}r(t)},l=()=>{let t=parseInt(Math.ceil(c/10)),e=[];for(let a=s-2;a<=s+2;a++)a>=1&&a<=t&&e.push({number:a,is_active:a===s?"active":""});n.value=e},r=a=>{s=a,Ut.a.ajax({url:"https://app7033.acapp.acwing.com.cn/api/ranklist/getlist/",data:{page:a},type:"get",headers:{Authorization:"Bearer "+t.state.user.token},success(t){e.value=t.users,c=t.users_count,console.log(t),l()},error(t){console.log(t)}})};return r(s),{users:e,total_users:c,pages:n,click_page:o}}};s("952d");const we=G()(ke,[["render",je],["__scopeId","data-v-4cd3f1a3"]]);var Ie=we;const Ce=t=>(Object(a["A"])("data-v-76e9bf5e"),t=t(),Object(a["y"])(),t),Ae={class:"table table-striped table-hover",style:{"margin-top":"2vh"}},Se=Ce(()=>Object(a["h"])("thead",null,[Object(a["h"])("tr",{style:{padding:"1vh"}},[Object(a["h"])("th",null,"玩家A"),Object(a["h"])("th",null,"玩家B"),Object(a["h"])("th",null,"对战结果"),Object(a["h"])("th",null,"对战时间"),Object(a["h"])("th",null,"操作")])],-1)),Be={style:{"text-align":"center"}},Le=["src"],ze={class:"record-user-username"},Me={style:{"text-align":"center"}},Fe=["src"],Pe={class:"record-user-username"},$e={style:{"text-align":"center","font-size":"1.5em","font-family":"cursive"}},Ne={style:{"text-align":"center"}},Ge={style:{"text-align":"center"}},Ue=["onClick"],De={"aria-label":"..."},Ve={class:"pagination",style:{float:"right"}},Ee=Ce(()=>Object(a["h"])("a",{class:"page-link",href:"#"},"上一页",-1)),Re=[Ee],Te=["onClick"],qe={class:"page-link",href:"#"},Je=Ce(()=>Object(a["h"])("a",{class:"page-link",href:"#"},"下一页",-1)),Ke=[Je];function He(t,e,s,c,n,o){const l=Object(a["F"])("ContentField");return Object(a["x"])(),Object(a["e"])(l,null,{default:Object(a["N"])(()=>[Object(a["h"])("table",Ae,[Se,Object(a["h"])("tbody",null,[(Object(a["x"])(!0),Object(a["g"])(a["a"],null,Object(a["D"])(c.records,t=>(Object(a["x"])(),Object(a["g"])("tr",{key:t.record.id},[Object(a["h"])("td",Be,[Object(a["h"])("img",{src:t.a_photo,class:"record-user-photo"},null,8,Le),Object(a["h"])("span",ze,Object(a["I"])(t.a_username),1)]),Object(a["h"])("td",Me,[Object(a["h"])("img",{src:t.b_photo,class:"record-user-photo"},null,8,Fe),Object(a["h"])("span",Pe,Object(a["I"])(t.b_username),1)]),Object(a["h"])("td",$e,Object(a["I"])(t.result),1),Object(a["h"])("td",Ne,Object(a["I"])(t.record.createtime),1),Object(a["h"])("td",Ge,[Object(a["h"])("button",{type:"button",class:"btn btn-danger",onClick:e=>c.open_record_content(t.record.id)},"查看录像",8,Ue)])]))),128))])]),Object(a["h"])("nav",De,[Object(a["h"])("ul",Ve,[Object(a["h"])("li",{class:"page-item",onClick:e[0]||(e[0]=t=>c.click_page(-2))},Re),(Object(a["x"])(!0),Object(a["g"])(a["a"],null,Object(a["D"])(c.pages,t=>(Object(a["x"])(),Object(a["g"])("li",{class:Object(a["s"])("page-item "+t.is_active),"aria-current":"page",key:t.number,onClick:e=>c.click_page(t.number)},[Object(a["h"])("a",qe,Object(a["I"])(t.number),1)],10,Te))),128)),Object(a["h"])("li",{class:"page-item",onClick:e[1]||(e[1]=t=>c.click_page(-1))},Ke)])])]),_:1})}var We={components:{ContentField:xe},setup(){const t=Object(P["b"])();let e=Object(a["C"])([]),s=1,c=0,n=Object(a["C"])([]);const o=t=>{if(-2===t)t=Math.max(s-1,1);else if(-1===t){let e=parseInt(Math.ceil(c/10));t=Math.min(e,s+1)}r(t)},l=()=>{let t=parseInt(Math.ceil(c/10)),e=[];for(let a=s-2;a<=s+2;a++)a>=1&&a<=t&&e.push({number:a,is_active:a===s?"active":""});n.value=e},r=a=>{s=a,Ut.a.ajax({url:"https://app7033.acapp.acwing.com.cn/api/record/getlist/",data:{page:a},type:"get",headers:{Authorization:"Bearer "+t.state.user.token},success(t){e.value=t.records,c=t.records_count,console.log(t),l()},error(t){console.log(t)}})};r(s);const i=t=>{let e=[];for(let s=0,a=0;s<13;s++){let s=[];for(let e=0;e<14;e++,a++)"0"===t[a]?s.push(0):s.push(1);e.push(s)}return e},d=s=>{console.log("recordId: "+s);for(const a of e.value)if(console.log("record.record.id: "+a.record.id),a.record.id===s){t.commit("updateIsRecord",!0),t.commit("updateGame",{map:i(a.record.map),a_id:a.record.aid,a_sx:a.record.asx,a_sy:a.record.asy,b_id:a.record.bid,b_sx:a.record.bsx,b_sy:a.record.bsy}),t.commit("updateSteps",{a_steps:a.record.asteps,b_steps:a.record.bsteps}),t.commit("updateRecordLoser",a.record.loser),Sc.push({name:"record_content",params:{recordId:s}});break}};return{records:e,total_records:c,open_record_content:d,pages:n,click_page:o}}};s("7b23");const Xe=G()(We,[["render",He],["__scopeId","data-v-76e9bf5e"]]);var Qe=Xe;const Ye=t=>(Object(a["A"])("data-v-b01b2326"),t=t(),Object(a["y"])(),t),Ze={class:"container"},ts={class:"row"},es={class:"col-3"},ss={class:"card",style:{"margin-top":"20px"}},as={class:"card-body"},cs=["src"],ns={class:"col-9"},os={class:"card",style:{"margin-top":"20px"}},ls={class:"card-header"},rs=Ye(()=>Object(a["h"])("span",{style:{"font-size":"120%"}},"我的Bot",-1)),is=Ye(()=>Object(a["h"])("button",{type:"button",class:"btn btn-primary float-end","data-bs-toggle":"modal","data-bs-target":"#add-bot-modal"},"创建Bot",-1)),ds={class:"modal fade",id:"add-bot-modal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1"},bs={class:"modal-dialog modal-dialog modal-dialog-centered modal-xl"},us={class:"modal-content"},ps=Ye(()=>Object(a["h"])("div",{class:"modal-header"},[Object(a["h"])("h5",{class:"modal-title",style:{"font-size":"150%"}},"创建Bot"),Object(a["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),hs={class:"modal-body"},ms={class:"mb-3"},js=Ye(()=>Object(a["h"])("label",{for:"add-bot-title",class:"form-label",style:{"font-size":"130%"}},"名称",-1)),Os={class:"mb-3"},gs=Ye(()=>Object(a["h"])("label",{for:"description",class:"form-label",style:{"font-size":"130%"}},"备注",-1)),fs={class:"mb-3"},vs=Ye(()=>Object(a["h"])("label",{for:"content",class:"form-label",style:{"font-size":"130%"}},"代码",-1)),_s={class:"modal-footer"},ys={class:"error-message"},xs=Ye(()=>Object(a["h"])("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"},"取消",-1)),ks={class:"card-body"},ws={class:"table table-striped table-hover"},Is=Ye(()=>Object(a["h"])("thead",null,[Object(a["h"])("tr",null,[Object(a["h"])("th",{style:{"text-align":"center"}},"Bot名称"),Object(a["h"])("th",{style:{"text-align":"center"}},"备注"),Object(a["h"])("th",{style:{"text-align":"center"}},"创建时间"),Object(a["h"])("th",{style:{"text-align":"center"}},"操作")])],-1)),Cs={style:{"text-align":"center"}},As={style:{"text-align":"center"}},Ss={style:{"text-align":"center"}},Bs={style:{"text-align":"center"}},Ls=["data-bs-target"],zs=["id"],Ms={class:"modal-dialog modal-dialog modal-dialog-centered modal-xl"},Fs={class:"modal-content"},Ps=Ye(()=>Object(a["h"])("div",{class:"modal-header"},[Object(a["h"])("h5",{class:"modal-title",style:{"font-size":"150%"}},"修改Bot"),Object(a["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),$s={class:"modal-body"},Ns={class:"mb-3"},Gs=Ye(()=>Object(a["h"])("label",{for:"update-bot-title",class:"form-label",style:{"font-size":"130%"}},"名称",-1)),Us=["onUpdate:modelValue"],Ds={class:"mb-3"},Vs=Ye(()=>Object(a["h"])("label",{for:"description",class:"form-label",style:{"font-size":"130%"}},"备注",-1)),Es=["onUpdate:modelValue"],Rs={class:"mb-3"},Ts=Ye(()=>Object(a["h"])("label",{for:"content",class:"form-label",style:{"font-size":"130%"}},"代码",-1)),qs={class:"modal-footer"},Js={class:"error-message"},Ks=["onClick"],Hs=Ye(()=>Object(a["h"])("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"},"取消",-1)),Ws=["onClick"];function Xs(t,e,s,c,n,o){const l=Object(a["F"])("VAceEditor");return Object(a["x"])(),Object(a["g"])("div",Ze,[Object(a["h"])("div",ts,[Object(a["h"])("div",es,[Object(a["h"])("div",ss,[Object(a["h"])("div",as,[Object(a["h"])("img",{src:t.$store.state.user.photo,alt:"",style:{width:"100%"}},null,8,cs)])])]),Object(a["h"])("div",ns,[Object(a["h"])("div",os,[Object(a["h"])("div",ls,[rs,is,Object(a["h"])("div",ds,[Object(a["h"])("div",bs,[Object(a["h"])("div",us,[ps,Object(a["h"])("div",hs,[Object(a["h"])("div",ms,[js,Object(a["O"])(Object(a["h"])("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>c.botadd.title=t),type:"text",class:"form-control",id:"add-bot-title",placeholder:"请输入Bot名称"},null,512),[[a["L"],c.botadd.title]])]),Object(a["h"])("div",Os,[gs,Object(a["O"])(Object(a["h"])("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>c.botadd.description=t),class:"form-control",id:"description",rows:"2",placeholder:"请输入Bot备注"},null,512),[[a["L"],c.botadd.description]])]),Object(a["h"])("div",fs,[vs,Object(a["k"])(l,{value:c.botadd.content,"onUpdate:value":e[2]||(e[2]=t=>c.botadd.content=t),onInit:t.editorInit,lang:"c_cpp",theme:"dawn",style:{height:"300px","font-size":"large"},options:{enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0,fontSize:18,tabSize:4,showPrintMargin:!1,highlightActiveLine:!0}},null,8,["value","onInit"])])]),Object(a["h"])("div",_s,[Object(a["h"])("div",ys,Object(a["I"])(c.botadd.error_message),1),Object(a["h"])("button",{type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=(...t)=>c.add_bot&&c.add_bot(...t))},"提交"),xs])])])])]),Object(a["h"])("div",ks,[Object(a["h"])("table",ws,[Is,Object(a["h"])("tbody",null,[(Object(a["x"])(!0),Object(a["g"])(a["a"],null,Object(a["D"])(c.bots,e=>(Object(a["x"])(),Object(a["g"])("tr",{key:e.id},[Object(a["h"])("td",Cs,Object(a["I"])(e.title),1),Object(a["h"])("td",As,Object(a["I"])(e.description),1),Object(a["h"])("td",Ss,Object(a["I"])(e.createtime),1),Object(a["h"])("td",Bs,[Object(a["h"])("button",{type:"button",class:"btn btn-primary",style:{"margin-right":"10px"},"data-bs-toggle":"modal","data-bs-target":"#update-bot-modal"+e.id},"修改",8,Ls),Object(a["h"])("div",{class:"modal fade",id:"update-bot-modal"+e.id,"data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1"},[Object(a["h"])("div",Ms,[Object(a["h"])("div",Fs,[Ps,Object(a["h"])("div",$s,[Object(a["h"])("div",Ns,[Gs,Object(a["O"])(Object(a["h"])("input",{"onUpdate:modelValue":t=>e.title=t,type:"text",class:"form-control",id:"update-bot-title",placeholder:"请输入Bot名称"},null,8,Us),[[a["L"],e.title]])]),Object(a["h"])("div",Ds,[Vs,Object(a["O"])(Object(a["h"])("textarea",{"onUpdate:modelValue":t=>e.description=t,class:"form-control",id:"description",rows:"2",placeholder:"请输入Bot备注"},null,8,Es),[[a["L"],e.description]])]),Object(a["h"])("div",Rs,[Ts,Object(a["k"])(l,{value:e.content,"onUpdate:value":t=>e.content=t,onInit:t.editorInit,lang:"c_cpp",theme:"dawn",style:{height:"300px","font-size":"large"},options:{enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0,fontSize:18,tabSize:4,showPrintMargin:!1,highlightActiveLine:!0}},null,8,["value","onUpdate:value","onInit"])])]),Object(a["h"])("div",qs,[Object(a["h"])("div",Js,Object(a["I"])(c.botupdate.error_message),1),Object(a["h"])("button",{type:"button",class:"btn btn-danger",onClick:t=>c.update_bot(e)},"提交",8,Ks),Hs])])])],8,zs),Object(a["h"])("button",{type:"button",class:"btn btn-danger",onClick:t=>c.remove_bot(e)},"删除",8,Ws)])]))),128))])])])])])])])}var Qs=s("f41e"),Ys=s("6d4f"),Zs=s.n(Ys),ta=(s("02c9"),s("55e5"),s("dddc"),s("da79"),{components:{VAceEditor:Qs["a"]},setup(){Zs.a.config.set("basePath","https://cdn.jsdelivr.net/npm/ace-builds@"+s("6d4f").version+"/src-noconflict/");const t=Object(P["b"])();let e=Object(a["C"])([]);const c=Object(a["B"])({title:"",description:"",content:"",error_message:""}),n=Object(a["B"])({title:"",description:"",content:"",error_message:""}),o=()=>{Ut.a.ajax({url:"https://app7033.acapp.acwing.com.cn/api/user/bot/getlist/",type:"GET",headers:{Authorization:"Bearer "+t.state.user.token},success(t){e.value=t}})};o();const l=()=>{c.error_message="",Ut.a.ajax({url:"https://app7033.acapp.acwing.com.cn/api/user/bot/add/",type:"POST",data:{title:c.title,description:c.description,content:c.content},headers:{Authorization:"Bearer "+t.state.user.token},success(t){"success"===t.error_message?(c.title="",c.description="",c.content="",V["Modal"].getInstance("#add-bot-modal").hide(),o()):c.error_message=t.error_message}})},r=e=>{Ut.a.ajax({url:"https://app7033.acapp.acwing.com.cn/api/user/bot/remove/",type:"POST",data:{bot_id:e.id},headers:{Authorization:"Bearer "+t.state.user.token},success(t){"success"===t.error_message&&o()}})},i=e=>{n.error_message="",Ut.a.ajax({url:"https://app7033.acapp.acwing.com.cn/api/user/bot/update/",type:"POST",data:{bot_id:e.id,title:e.title,description:e.description,content:e.content},headers:{Authorization:"Bearer "+t.state.user.token},success(t){"update success"===t.error_message?(V["Modal"].getInstance("#update-bot-modal"+e.id).hide(),o()):n.error_message=t.error_message}})};return{bots:e,botadd:c,botupdate:n,add_bot:l,remove_bot:r,update_bot:i}}});s("084a");const ea=G()(ta,[["render",Xs],["__scopeId","data-v-b01b2326"]]);var sa=ea;function aa(t,e,s,c,n,o){return Object(a["x"])(),Object(a["g"])("div",null,"404 Not Found")}var ca={name:"NotFound",data(){return{}},methods:{}};s("d42f");const na=G()(ca,[["render",aa],["__scopeId","data-v-cee1ae06"]]);var oa=na;const la=t=>(Object(a["A"])("data-v-ce4a1eb4"),t=t(),Object(a["y"])(),t),ra={class:"row justify-content-md-center"},ia={class:"col-3 gradient-border",id:"box"},da={class:"mb-3"},ba=la(()=>Object(a["h"])("label",{for:"username",class:"form-label",style:{color:"black"}},"用户名",-1)),ua={class:"mb-3"},pa=la(()=>Object(a["h"])("label",{for:"password",class:"form-label",style:{color:"black"}},"密码",-1)),ha={class:"error-message"},ma=la(()=>Object(a["h"])("button",{type:"submit",class:"btn btn-primary",style:{"background-image":"linear-gradient(rgba(241, 157, 172, 1),rgba(255, 255, 170, 1))"}},"登录",-1));function ja(t,e,s,c,n,o){const l=Object(a["F"])("HomeField");return c.show_content?(Object(a["x"])(),Object(a["e"])(l,{key:0},{default:Object(a["N"])(()=>[Object(a["h"])("div",ra,[Object(a["h"])("div",ia,[Object(a["h"])("form",{onSubmit:e[2]||(e[2]=Object(a["P"])((...t)=>c.login&&c.login(...t),["prevent"]))},[Object(a["h"])("div",da,[ba,Object(a["O"])(Object(a["h"])("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>c.username=t),type:"text",class:"form-control",id:"username",placeholder:"请输入用户名"},null,512),[[a["L"],c.username]])]),Object(a["h"])("div",ua,[pa,Object(a["O"])(Object(a["h"])("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>c.password=t),type:"password",class:"form-control",id:"password",placeholder:"请输入密码"},null,512),[[a["L"],c.password]])]),Object(a["h"])("div",ha,Object(a["I"])(c.error_message),1),ma],32)])])]),_:1})):Object(a["f"])("",!0)}const Oa=t=>(Object(a["A"])("data-v-72b05854"),t=t(),Object(a["y"])(),t),ga=Oa(()=>Object(a["h"])("br",null,null,-1)),fa=Oa(()=>Object(a["h"])("br",null,null,-1)),va=Oa(()=>Object(a["h"])("br",null,null,-1)),_a=Oa(()=>Object(a["h"])("br",null,null,-1)),ya=Oa(()=>Object(a["h"])("br",null,null,-1)),xa=Oa(()=>Object(a["h"])("br",null,null,-1)),ka=Oa(()=>Object(a["h"])("br",null,null,-1)),wa=Oa(()=>Object(a["h"])("br",null,null,-1)),Ia=Oa(()=>Object(a["h"])("br",null,null,-1)),Ca=Oa(()=>Object(a["h"])("br",null,null,-1)),Aa=Oa(()=>Object(a["h"])("br",null,null,-1)),Sa={class:"container home-field"},Ba={class:"card",style:{"background-color":"rgba(255,0,0,0)","border-style":"none"}},La={class:"card-body"};function za(t,e){return Object(a["x"])(),Object(a["g"])(a["a"],null,[ga,fa,va,_a,ya,xa,ka,wa,Ia,Ca,Aa,Object(a["h"])("div",Sa,[Object(a["h"])("div",Ba,[Object(a["h"])("div",La,[Object(a["E"])(t.$slots,"default",{},void 0,!0)])])])],64)}s("0d1d");const Ma={},Fa=G()(Ma,[["render",za],["__scopeId","data-v-72b05854"]]);var Pa=Fa,$a={components:{HomeField:Pa},setup(){const t=Object(P["b"])();let e=Object(a["C"])(""),s=Object(a["C"])(""),c=Object(a["C"])(""),n=Object(a["C"])(!1);const o=localStorage.getItem("jwt_token");o?(t.commit("updateToken",o),t.dispatch("getinfo",{success(){Sc.push({name:"home"})},error(){n.value=!0}})):n.value=!0;const l=()=>{t.dispatch("login",{username:e.value,password:s.value,success(){alert("登录成功！"),t.dispatch("getinfo",{success(){setTimeout(()=>{Sc.push({name:"home"})},500)}})},error(){c.value="用户名或密码错误"}})};return{username:e,password:s,error_message:c,login:l,show_content:n}}};s("0f93");const Na=G()($a,[["render",ja],["__scopeId","data-v-ce4a1eb4"]]);var Ga=Na;const Ua=t=>(Object(a["A"])("data-v-70156b64"),t=t(),Object(a["y"])(),t),Da={class:"row justify-content-md-center"},Va={class:"col-3 gradient-border",id:"box"},Ea={class:"mb-3"},Ra=Ua(()=>Object(a["h"])("label",{for:"username",class:"form-label",style:{color:"black"}},"用户名",-1)),Ta={class:"mb-3"},qa=Ua(()=>Object(a["h"])("label",{for:"password",class:"form-label",style:{color:"black"}},"密码",-1)),Ja={class:"mb-3"},Ka=Ua(()=>Object(a["h"])("label",{for:"confirmPassword",class:"form-label",style:{color:"black"}},"确认密码",-1)),Ha={class:"error-message"},Wa=Ua(()=>Object(a["h"])("button",{type:"submit",class:"btn btn-primary",style:{"background-image":"linear-gradient(rgba(241, 157, 172, 1),rgba(255, 255, 170, 1))"}},"注册",-1));function Xa(t,e,s,c,n,o){const l=Object(a["F"])("HomeField");return Object(a["x"])(),Object(a["e"])(l,null,{default:Object(a["N"])(()=>[Object(a["h"])("div",Da,[Object(a["h"])("div",Va,[Object(a["h"])("form",{onSubmit:e[3]||(e[3]=Object(a["P"])((...t)=>c.register&&c.register(...t),["prevent"]))},[Object(a["h"])("div",Ea,[Ra,Object(a["O"])(Object(a["h"])("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>c.username=t),type:"text",class:"form-control",id:"username",placeholder:"请输入用户名"},null,512),[[a["L"],c.username]])]),Object(a["h"])("div",Ta,[qa,Object(a["O"])(Object(a["h"])("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>c.password=t),type:"password",class:"form-control",id:"password",placeholder:"请输入密码"},null,512),[[a["L"],c.password]])]),Object(a["h"])("div",Ja,[Ka,Object(a["O"])(Object(a["h"])("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>c.confirmPassword=t),type:"password",class:"form-control",id:"confirmPassword",placeholder:"请再次输入密码"},null,512),[[a["L"],c.confirmPassword]])]),Object(a["h"])("div",Ha,Object(a["I"])(c.error_message),1),Wa],32)])])]),_:1})}var Qa={components:{HomeField:Pa},setup(){let t=Object(a["C"])(""),e=Object(a["C"])(""),s=Object(a["C"])(""),c=Object(a["C"])("");const n=()=>{Ut.a.ajax({url:"https://app7033.acapp.acwing.com.cn/api/user/account/register/",type:"post",data:{username:t.value,password:e.value,confirmPassword:s.value},success(t){"success"===t.error_message?(alert("注册成功！即将跳转到登录页面..."),setTimeout(()=>{Sc.push({name:"user_account_login"})},500)):c.value=t.error_message}})};return{username:t,password:e,confirmPassword:s,error_message:c,register:n}}};s("38e6");const Ya=G()(Qa,[["render",Xa],["__scopeId","data-v-70156b64"]]);var Za=Ya,tc={state:{id:"",username:"",photo:"",token:"",is_login:!1,pulling_info:!0},getters:{},mutations:{updateUser(t,e){t.id=e.id,t.username=e.username,t.photo=e.photo,t.is_login=e.is_login},updateToken(t,e){t.token=e},logout(t){t.id="",t.username="",t.photo="",t.token="",t.is_login=!1},updatePullingInfo(t,e){t.pulling_info=e}},actions:{login(t,e){Ut.a.ajax({url:"https://app7033.acapp.acwing.com.cn/api/user/account/token/",type:"post",data:{username:e.username,password:e.password},success(s){"success"===s.error_message?(localStorage.setItem("jwt_token",s.token),t.commit("updateToken",s.token),e.success(s)):e.error(s)},error(t){e.error(t)}})},getinfo(t,e){Ut.a.ajax({url:"https://app7033.acapp.acwing.com.cn/api/user/account/info/",type:"get",headers:{Authorization:"Bearer "+t.state.token},success(s){"success"===s.error_message?(t.commit("updateUser",{...s,is_login:!0}),e.success(s)):e.error(s)},error(t){e.error(t)}})},logout(t){localStorage.removeItem("jwt_token"),t.commit("logout")}},modules:{}},ec={state:{status:"matching",socket:null,oppponent:null,opponent_username:"",opponent_photo:"",gamemap:null,a_id:0,a_sx:0,a_sy:0,b_id:0,b_sx:0,b_sy:0,gameObject:null,loser:"none"},getters:{},mutations:{updateSocket(t,e){t.socket=e},updateOpponent(t,e){t.opponent_username=e.username,t.opponent_photo=e.photo},updateStatus(t,e){t.status=e},updateGame(t,e){t.gamemap=e.map,t.a_id=e.a_id,t.a_sx=e.a_sx,t.a_sy=e.a_sy,t.b_id=e.b_id,t.b_sx=e.b_sx,t.b_sy=e.b_sy},updateGameObject(t,e){t.gameObject=e},updateLoser(t,e){t.loser=e}},actions:{},modules:{}},sc={state:{is_record:!1,a_steps:"",b_steps:"",record_loser:""},getters:{},mutations:{updateIsRecord(t,e){t.is_record=e},updateSteps(t,e){t.a_steps=e.a_steps,t.b_steps=e.b_steps},updateRecordLoser(t,e){t.record_loser=e}},actions:{},modules:{}},ac=Object(P["a"])({state:{},getters:{},mutations:{},actions:{},modules:{user:tc,pk:ec,record:sc}});function cc(t,e,s,c,n,o){const l=Object(a["F"])("PlayGround");return Object(a["x"])(),Object(a["e"])(l)}var nc={components:{PlayGround:vt},setup(){}};const oc=G()(nc,[["render",cc]]);var lc=oc;const rc={class:"container content-field"},ic={class:"card",id:"1"},dc={class:"card-body"},bc=Object(a["i"])('<div class="card1 introduction" data-v-04ab10ca><h3 data-v-04ab10ca>前言</h3><p data-v-04ab10ca>确切地说，这并不是贪吃蛇。<br data-v-04ab10ca> King of Bots为<strong data-v-04ab10ca>双人对战的回合制游戏</strong>(●ˇ∀ˇ●)<br data-v-04ab10ca> 欢迎各位大佬贡献自己的Bot代码，祝各位游戏愉快~ o(*￣▽￣*)ブ </p></div><div class="card1 rule" data-v-04ab10ca><h3 data-v-04ab10ca>游戏规则</h3><ul data-v-04ab10ca><li data-v-04ab10ca>玩家可以选择亲自出马或者提交Bot代码（目前仅支持Java）来操纵自己的蛇，成功进入对局后在<span style="color:red;font-weight:550;" data-v-04ab10ca>对战界面的左下角</span>会显示己方蛇的颜色。</li><li data-v-04ab10ca>每一回合，双方通过交互给出一条Bot的移动指令，<span style="color:red;font-weight:550;" data-v-04ab10ca>最多等待5秒</span>，接收到双方指令后，Bot移动一步</li><li data-v-04ab10ca> 地图为13×14的网格，为保证公平已将地图设置为中心对称，由1x1的草地与障碍物（共20个）构成,进行以下行为将会直接被判定为失败： <ul data-v-04ab10ca><li data-v-04ab10ca>在规定时间(5秒)内未给出Bot移动指令</li><li data-v-04ab10ca>撞到障碍物</li><li data-v-04ab10ca>主动撞到对方或者自己咬自己</li></ul></li><li data-v-04ab10ca>当双方同时在一回合内失败，对局结果为平局</li></ul></div><div class="card1 guidence" data-v-04ab10ca><h3 data-v-04ab10ca>指引</h3> ps:由于制作的非常简陋，当前版本可能还存在许多bug，蹲蹲后续的反馈，后面可能会进行更新维护 <ul data-v-04ab10ca><li data-v-04ab10ca> 注册→登录→进入主页面，看到4个主要模块： <ul data-v-04ab10ca><li data-v-04ab10ca>对战：玩家在此对局匹配</li><li data-v-04ab10ca>对局列表：当前可以查看所有对局记录，支持对局回放功能(目前完全开放)</li><li data-v-04ab10ca>排行榜：展示所有玩家的rating值</li><li data-v-04ab10ca>用户中心（右上角）：玩家可以在 &#39;我的Bot&#39; 管理自己的Bot仓库，编辑自己的Bot代码，打造最强Bot！</li></ul></li><li data-v-04ab10ca>由于当前还未设置好系统默认机器人，匹配池里可能没什么人……（努力更新ing）<br data-v-04ab10ca> 可以开两个浏览器用两个账号来测试自己的Bot,当然为保障游戏体验,欢迎私信我或者找上一个搭子共同对战~<br data-v-04ab10ca> 不过我也会不定期待在匹配池里和各位进行测试的~ </li><li data-v-04ab10ca>在对局过程中<span style="color:red;font-weight:550;" data-v-04ab10ca>千万不要刷新！千万不要刷新！千万不要刷新！</span>（哈哈重要的事情说三遍），目前还未实现断线重连功能，一旦刷新将直接退出对局</li><li data-v-04ab10ca>在对战界面中可以选择Bot的操纵方式： <ul data-v-04ab10ca><li data-v-04ab10ca>&#39;亲自出马&#39;：玩家通过键盘的↑ → ↓ ←来控制每回合Bot的移动</li><li data-v-04ab10ca>&#39;<i data-v-04ab10ca>你的Bot </i>&#39;：玩家选择出战的Bot，通过读取每回合代码的输出来控制Bot的移动方向</li></ul></li><li data-v-04ab10ca>每轮对局，胜方rating+5,败方rating-2，平局双方rating+3</li></ul></div>',3);function uc(t,e,s,c,n,o){return Object(a["x"])(),Object(a["g"])("div",rc,[Object(a["h"])("div",ic,[Object(a["h"])("div",dc,[Object(a["E"])(t.$slots,"default",{},()=>[bc],!0)])])])}var pc={setup(){}};s("f05b");const hc=G()(pc,[["render",uc],["__scopeId","data-v-04ab10ca"]]);var mc=hc;const jc=t=>(Object(a["A"])("data-v-3dd3f096"),t=t(),Object(a["y"])(),t),Oc={class:"container content-field"},gc={class:"card1"},fc={class:"card-body"},vc=Object(a["i"])('<div class="card interact" data-v-3dd3f096><h3 data-v-3dd3f096>Bot交互方式</h3> 每一回合系统会将当前对局信息完全传输给用户，并读取用户的Bot代码后对Bot进行操作<br data-v-3dd3f096><br data-v-3dd3f096><h5 data-v-3dd3f096>输入格式</h5><ul data-v-3dd3f096><li data-v-3dd3f096>一串字符串：初始地图信息#己方Sx#己方Sy#(己方所有操作)#对方Sx#对方Sy#(对方所有操作)</li><li data-v-3dd3f096>不用担心（。＾▽＾），这些信息在Bot代码样例模板中都处理好了~</li></ul><h5 data-v-3dd3f096>输出格式</h5><ul data-v-3dd3f096><li data-v-3dd3f096>一个整数，代表运动方向：0 上 | 1 右 | 2 下 | 3 左</li><li data-v-3dd3f096>玩家只需在&#39;nextMove&#39;函数中给出每一回合的输出即可</li></ul><h5 data-v-3dd3f096>输入样例</h5><ul data-v-3dd3f096> 11111111111111100011010000011001000000000110001100001001100000001000011001000000000110000100100001100000000010011000010000000110010000110001100000000010011000001011000111111111111111#11#1#(011101210010)#1#12#(233322233033) </ul><h5 data-v-3dd3f096>样例解释</h5><ul data-v-3dd3f096><li data-v-3dd3f096>前面的01字符串为2为地图信息压缩后的1维字符串，0表示空地，1表示障碍物</li><li data-v-3dd3f096>接下来的初始坐标信息可以帮助你判断你和对方的起点</li><li data-v-3dd3f096>括号内的内容为每回合双方的移动方向，结合蛇身的伸长方式可以完全确定当前的游戏局面</li><li data-v-3dd3f096>通过以上信息，你可以判断出当前回合下最有利于己方的移动方向</li></ul></div>',1),_c={class:"card code"},yc=jc(()=>Object(a["h"])("h3",{style:{"margin-bottom":"15px"}},"Bot样例代码",-1));function xc(t,e,s,c,n,o){const l=Object(a["F"])("VAceEditor");return Object(a["x"])(),Object(a["g"])("div",Oc,[Object(a["h"])("div",gc,[Object(a["h"])("div",fc,[Object(a["E"])(t.$slots,"default",{},()=>[vc,Object(a["h"])("div",_c,[yc,Object(a["k"])(l,{lang:"c_cpp",theme:"dracula",style:{height:"1850px",width:"100%","font-size":"large"},options:{enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0,fontSize:18,tabSize:4,showPrintMargin:!1,highlightActiveLine:!0,readOnly:!0},value:c.code,"onUpdate:value":e[0]||(e[0]=t=>c.code=t)},null,8,["value"])])],!0)])])])}s("534c");var kc={components:{VAceEditor:Qs["a"]},setup(){const t=Object(a["C"])("package com.kob.botrunningsystem.utils;\n\nimport java.io.File;\nimport java.io.FileNotFoundException;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Scanner;\n\npublic class Bot implements java.util.function.Supplier<Integer> {\n    static class Cell {\n        public int x, y;\n        public Cell(int x, int y) {\n            this.x = x;\n            this.y = y;\n        }\n    }\n\n    private boolean check_tail_increasing(int step) {  // 检验当前回合，蛇的长度是否增加\n        if (step <= 10) return true;\n        return step % 3 == 1;\n    }\n\n    //  还原出蛇身\n    public List<Cell> getCells(int sx, int sy, String steps) {\n        steps = steps.substring(1, steps.length() - 1);\n        List<Cell> res = new ArrayList<>();\n\n        int[] dx = {-1, 0, 1, 0}, dy = {0, 1, 0, -1};\n        int x = sx, y = sy;\n        int step = 0;\n        res.add(new Cell(x, y));\n        for (int i = 0; i < steps.length(); i ++ ) {\n            int d = steps.charAt(i) - '0';\n            x += dx[d];\n            y += dy[d];\n            res.add(new Cell(x, y));\n            if (!check_tail_increasing( ++ step)) {\n                res.remove(0);\n            }\n        }\n        return res;\n    }\n\n\n    //  获取下一步输入,返回值即为当前回合Bot移动方向\n    //  0 上  |  1 右  |  2 下  |  3 左\n    public Integer nextMove(String input) {\n        String[] strs = input.split(\"#\");\n        int[][] g = new int[13][14];\n\n        //  还原原始地图\n        for (int i = 0, k = 0; i < 13; i ++ ) {\n            for (int j = 0; j < 14; j ++, k ++ ) {\n                if (strs[0].charAt(k) == '1') {\n                    g[i][j] = 1;\n                }\n            }\n        }\n\n        // 还原蛇身\n        int aSx = Integer.parseInt(strs[1]), aSy = Integer.parseInt(strs[2]);\n        int bSx = Integer.parseInt(strs[4]), bSy = Integer.parseInt(strs[5]);\n\n        List<Cell> aCells = getCells(aSx, aSy, strs[3]);\n        List<Cell> bCells = getCells(bSx, bSy, strs[6]);\n\n        //  更新地图\n        for (Cell c: aCells) g[c.x][c.y] = 1;\n        for (Cell c: bCells) g[c.x][c.y] = 1;\n\n/*-----------------------------------需要修改的部分----------------------------------------*/\n\n        // 制定当前回合策略\n        int[] dx = {-1, 0, 1, 0}, dy = {0, 1, 0, -1};\n        for (int i = 0; i < 4; i ++ ) {\n            int x = aCells.get(aCells.size() - 1).x + dx[i];\n            int y = aCells.get(aCells.size() - 1).y + dy[i];\n            if (x >= 0 && x < 13 && y >= 0 && y < 14 && g[x][y] == 0) {\n                return i;\n            }\n        }\n\n        return 0;\n/*-----------------------------------------------------------------------------------------*/\n    }\n    \n    @Override\n    public Integer get() {\n        File file = new File(\"input.txt\");\n        try {\n            Scanner sc = new Scanner(file);\n            return nextMove(sc.next());\n        } catch (FileNotFoundException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}");return Zs.a.config.set("basePath","https://cdn.jsdelivr.net/npm/ace-builds@"+s("6d4f").version+"/src-noconflict/"),{code:t}}};s("b465");const wc=G()(kc,[["render",xc],["__scopeId","data-v-3dd3f096"]]);var Ic=wc;const Cc=[{path:"/",name:"home",redirect:"/pk/",meta:{requestAuth:!0}},{path:"/pk/",name:"pk_index",component:te,meta:{requestAuth:!0}},{path:"/ranklist/",name:"ranklist_index",component:Ie,meta:{requestAuth:!0}},{path:"/record/",name:"record_index",component:Qe,meta:{requestAuth:!0}},{path:"/record/:recordId/",name:"record_content",component:lc,meta:{requestAuth:!1}},{path:"/rule/",name:"rule_index",component:mc,meta:{requestAuth:!1}},{path:"/example/",name:"example_index",component:Ic,meta:{requestAuth:!1}},{path:"/user/bot/",name:"user_bot_index",component:sa,meta:{requestAuth:!0}},{path:"/user/account/login/",name:"user_account_login",component:Ga,meta:{requestAuth:!1}},{path:"/user/account/register/",name:"user_account_register",component:Za,meta:{requestAuth:!1}},{path:"/404/",name:"not_found",component:oa,meta:{requestAuth:!1}},{path:"/:catchAll(.*)",redirect:"/404/"}],Ac=Object(F["a"])({history:Object(F["b"])(),routes:Cc});Ac.beforeEach((t,e,s)=>{t.meta.requestAuth&&!ac.state.user.is_login?s({name:"user_account_login"}):s()});var Sc=Ac;Object(a["d"])(T).use(ac).use(Sc).mount("#app")},"5a9f":function(t,e,s){},"5b3e":function(t,e,s){},"611a":function(t,e,s){},"6d59":function(t,e,s){},"77da":function(t,e,s){},"7b13":function(t,e,s){},"7b23":function(t,e,s){"use strict";s("dc2f")},"806a":function(t,e,s){},8329:function(t,e,s){"use strict";s("cf38")},"89df":function(t,e,s){},"952d":function(t,e,s){"use strict";s("5b3e")},a5f2:function(t,e,s){"use strict";s("611a")},aaa2:function(t,e,s){"use strict";s("aeb9")},ad17:function(t,e,s){},aeb9:function(t,e,s){},b465:function(t,e,s){"use strict";s("7b13")},c527:function(t,e,s){},ce67:function(t,e,s){"use strict";s("eaf2")},cf38:function(t,e,s){},d42f:function(t,e,s){"use strict";s("41de")},dc2f:function(t,e,s){},de29:function(t,e,s){"use strict";s("89df")},e6ba:function(t,e,s){},eaf2:function(t,e,s){},f05b:function(t,e,s){"use strict";s("f6cf")},f15a:function(t,e,s){"use strict";s("5a9f")},f6cf:function(t,e,s){}});
//# sourceMappingURL=app.5bd14e7b.js.map